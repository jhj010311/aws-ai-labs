- Python 3.7+ 설치
- jq 설치 (JSON 파싱용)
sudo apt-get install jq -y


$ aws bedrock list-foundation-models
{
    "modelSummaries": [
        {
            "modelArn": "arn:aws:bedrock:us-east-1::foundation-model/twelvelabs.marengo-embed-2-7-v1:0",
            "modelId": "twelvelabs.marengo-embed-2-7-v1:0",
            "modelName": "Marengo Embed v2.7",
            "providerName": "TwelveLabs",
            "inputModalities": [
                "TEXT",
                "IMAGE",
                "SPEECH",
                "VIDEO"
            ],




예시 데이터 파일 생성 (product-prompt.json):



# 요청 본문을 Base64로 인코딩하여 API 호출
aws bedrock-runtime invoke-model \
  --model-id anthropic.claude-3-haiku-20240307-v1:0 \
  --content-type application/json \
  --accept application/json \
  --body "$(cat product-prompt.json | jq -r .body | jq -c .)" \
  response.json

# 결과 확인
cat response.json | jq -r '.body' | base64 -d | jq -r '.content[0].text'



error : string argument should contain only ASCII characters

수정 : 
aws bedrock-runtime invoke-model \
  --model-id anthropic.claude-3-haiku-20240307-v1:0 \
  --content-type application/json \
  --accept application/json \
  --body "$(jq -c .body product-prompt.json)" \
  --cli-binary-format raw-in-base64-out \
  response.json


error:
$ cat response.json | jq -r '.body' | base64 -d | jq -r '.content[0].text'
jq: parse error: Invalid numeric literal at EOF at line 1, column 3




### 1.2 배치 처리를 위한 스크립트

**스크립트 파일 생성** (`generate-marketing.sh`):


뭐 예제마다 ASCII 말곤 넣지 말라고 에러 띄우면서 취소되니 예제 진행해볼 수가 없음




chatbot.sh 생성
(일부 수정)

$
chmod +x chatbot.sh
./chatbot.sh
=== 제품 상담 챗봇 ===
제품에 대해 궁금한 것을 물어보세요. (종료: 'quit')
----------------------------------------
고객: 스마트워치의 배터리는 얼마나 지속되나요?

An error occurred (ValidationException) when calling the InvokeModel operation: Malformed input request, please reformat your input and try again.
cat: chat-response.json: No such file or directory
상담원: 

rm: cannot remove 'chat-response.json': No such file or directory
고객:







market-report.txt 생성

summarize-document.sh 생성

gpt 검수로 bash 도중 에러 발생하는 것을 해결:
jq: parse error: Invalid string: control characters from U+0000 through U+001F must be escaped at line 40, column 487

An error occurred (ValidationException) when calling the InvokeModel operation: Value null at 'body' failed to satisfy constraint: Member must not be null
cat: summary-response.json: No such file or directory

(결과가 summary-bullet.txt 파일로 저장되었습니다)
rm: cannot remove 'summary-response.json': No such file or directory



1차수정 후 bash 도중 에러메세지가 발생하진 않지만
파일은 비어있음



2차수정
=== 임원용 요약 (핵심 수치와 결론 중심, 3-4 문장) ===
{
    "contentType": "application/json"
}
❌ 요약 중 오류 발생: The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object. Received undefined

---

요약 자체는 제대로 들어왔음




summarize.js 수정중....



1700 claude를 통해서 수정 완료